<!DOCTYPE html>
<html lang="eng-us">

<!--  test.html to test the API for showtimes


-->


<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Date Night</title>
    <link rel="stylesheet" type="text/css" href="style_test.css">

    <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">  -->

    <!-- load in a reset of CSS  -->
    <!-- *RPB  redo the styles after loading in the rest.css  -->
    <!-- <link rel="stylesheet" type="text/css" href="assets/css/reset.css">   -->
    <!-- load my style sheet -->
    <!-- JQuery -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <!--
  <script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
  -->

    <!-- Bootstrap CDN-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="assets/javascript/moment.js"></script>
    <script src="assets/javascript/numeral.js"></script>

</head>

<body>
    <div>
        <hr>
    </div>
    <div>
        <hr>
    </div>
    <div class="wrapper">
        <div id="inputSect" style="margin:3px; padding:3px">
            <!--        <form id="user-form">   -->
            <label for="number-input">Latitude</label>
            <input type="number" id="input-lat">
            <p></p>
            <label for="number-input">Longitude</label>
            <input type="number" id="input-lon">
            <p></p>
            <label for="number-input">Distance</label>
            <input type="number" id="input-dist">
            <p></p>
            <!-- Button triggers new movie to be added -->
            <input id="bttnUserInput" type="submit" value="Submit">
            <!--        </form>   -->
        </div>
    </div>
    <div>
        <hr>
    </div>
    <div class="wrapper">
        <div class="container-fluid">
            <div id="movieOutput" style="margin:5px; padding:5px"></div>
        </div>
    </div>
    <!-- Modal windows come up next -->
    <!-- GPS Modal -->
    <div id="modLocation" class="modal">
        <div class="modal-content">
            <span id="closeModLocation" class="close">&times;</span>
            <h2>
                <p>Searching for GPS location</p>
            </h2>
            <p> </p>
            <p>Please allow location privaledge and then wait</p>
        </div>
    </div>
    <!-- Searching for all movie entries Modal -->
    <div id="modSearch1" class="modal">
        <div class="modal-content">
            <span id="closeModSearch1" class="close">&times;</span>
            <h2>
                <p>Searching for all theaters and movies within search area</p>
            </h2>
            <p> </p>
            <p>Please wait ...</p>
        </div>
    </div>
    <!-- Searching for all movie entries Modal -->
    <div id="modSearch2" class="modal">
        <div class="modal-content">
            <span id="closeModSearch2" class="close">&times;</span>
            <h2>
                <p>Searching for all movie data </p>
            </h2>
            <p> </p>
            <p>Please wait ...</p>
        </div>
    </div>
    <!-- Searching for cinema address Modal -->
    <div id="modSearch3" class="modal">
        <div class="modal-content">
            <span id="closeModSearch3" class="close">&times;</span>
            <h2>
                <p>Searching for addresses </p>
            </h2>
            <p> </p>
            <p>Please wait ...</p>
        </div>
    </div>
    <!-- Searching for cinema address Modal -->
    <div id="modMovieTimes" class="modal">
        <div class="modal-content">
            <span id="closeModMovieTimes" class="close">&times;</span>
            <h2>
                <p>Getting movie times</p>
            </h2>
            <p> </p>
            <p>Please wait ...</p>
        </div>
    </div>



    <script src="assets/javascript/moviesearch.js"></script>

    <script>

        $(document).ready(function () {
            getLocation();

            //add click listener to all movie pics
            $(document.body).on("click", ".movie-pic", evalPicClick);

            $("#bttnUserInput").on("click", function (event) {
                //submit button was pushed
                console.log("submit clicked");
                event.preventDefault();
                theaterObj.searchLat = numeral($("#input-lat").val()).format("+0000.000000");
                theaterObj.searchLon = numeral($("#input-lon").val()).format("+0000.000000");
                var distInKM = parseFloat($("#input-dist").val()) * 1.60934;
                theaterObj.searchDist = numeral(distInKM).format("+0000.0000");

                if (theaterObj.searchLat === "+0000.000000" || theaterObj.searchLon === "+0000.000000") {
                    //left blank, so put in Evanston as default
                    theaterObj.searchLat = numeral(42.048995).format("+0000.000000");
                    theaterObj.searchLon = numeral(-87.684505).format("+0000.000000");
                    theaterObj.searchDist = numeral(6.00).format("+0000.0000");
                };

                //for modal popups
                testSearch();
            });
        });
    </script>

</body>

</html>